<!DOCTYPE html>
<html>
<head>
  <title>Payment List</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffe6ea;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }
    h2 {
      color: #d6336c;
    }
    input, button, select {
      margin: 5px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #d6336c;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #bf2b5b;
    }
    .paid {
      text-decoration: line-through;
      color: gray;
    }
    ul {
      list-style-type: none;
      padding: 0;
      width: 350px;
    }
    li {
      background: white;
      margin: 5px 0;
      padding: 10px;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .entry-content {
      flex-grow: 1;
    }
    .delete-btn {
      background-color: #ff5c5c;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      color: white;
      margin-left: 10px;
      cursor: pointer;
    }
    .delete-btn:hover {
      background-color: #e04b4b;
    }
  </style>
</head>
<body>
  <h2>Payment List</h2>
  <input type="text" id="nameInput" placeholder="Name">
  <input type="number" id="priceInput" placeholder="Price">
  <input type="date" id="dateInput">
  <button onclick="addEntry()">Add</button>

  <select id="dateFilter" onchange="renderList()">
    <option value="all">All Dates</option>
  </select>

  <ul id="paymentList"></ul>

  <script>
    let payments = JSON.parse(localStorage.getItem('payments')) || [];

    function savePayments() {
      localStorage.setItem('payments', JSON.stringify(payments));
    }

    function deleteEntry(index) {
      payments.splice(index, 1);
      savePayments();
      renderList();
    }

    function renderList() {
      const list = document.getElementById("paymentList");
      const dateFilter = document.getElementById("dateFilter").value;
      list.innerHTML = '';

      const grouped = {};
      payments.forEach((entry, index) => {
        if (!grouped[entry.date]) grouped[entry.date] = [];
        grouped[entry.date].push({ ...entry, index });
      });

      const filterSelect = document.getElementById("dateFilter");
      const currentOptions = Array.from(filterSelect.options).map(o => o.value);
      Object.keys(grouped).sort().forEach(date => {
        if (!currentOptions.includes(date)) {
          const option = document.createElement("option");
          option.value = date;
          option.innerText = date;
          filterSelect.appendChild(option);
        }
      });

      const datesToShow = dateFilter === "all" ? Object.keys(grouped).sort() : [dateFilter];

      datesToShow.forEach(date => {
        if (!grouped[date]) return;

        const dateHeader = document.createElement("h3");
        dateHeader.innerText = date;
        list.appendChild(dateHeader);

        grouped[date].forEach(({ name, price, paid, index }) => {
          const li = document.createElement("li");

          const contentDiv = document.createElement("div");
          contentDiv.className = "entry-content";

          const label = document.createElement("label");
          label.innerText = `${name} - $${parseFloat(price).toFixed(2)} `;
          if (paid) label.classList.add("paid");

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = paid;
          checkbox.onchange = function () {
            payments[index].paid = checkbox.checked;
            savePayments();
            renderList();
          };

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "delete-btn";
          deleteBtn.innerText = "Delete";
          deleteBtn.onclick = function () {
            deleteEntry(index);
          };

          contentDiv.appendChild(label);
          contentDiv.appendChild(checkbox);
          li.appendChild(contentDiv);
          li.appendChild(deleteBtn);
          list.appendChild(li);
        });
      });
    }

    function addEntry() {
      const name = document.getElementById("nameInput").value.trim();
      const price = document.getElementById("priceInput").value;
      const dateInput = document.getElementById("dateInput").value;
      if (!name || !price) return;

      const date = dateInput || new Date().toISOString().split('T')[0];

      payments.push({ name, price, paid: false, date });
      savePayments();
      renderList();

      document.getElementById("nameInput").value = '';
      document.getElementById("priceInput").value = '';
      document.getElementById("dateInput").value = '';
    }

    renderList();
  </script>
</body>
</html>
